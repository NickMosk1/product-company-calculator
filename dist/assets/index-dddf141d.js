import{j as t,C as e,a as i,L as s,P as o,b as r,p as a,c as l,d as n,e as d,R as c,i as p,f as h}from"./charts-837dfa33.js";import{a as x,r as m,R as f}from"./vendor-324528e4.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var u={},g=x;u.createRoot=g.createRoot,u.hydrateRoot=g.hydrateRoot;const b=({onCalculate:e,isCalculating:i})=>{const[s,o]=m.useState({}),[r,a]=m.useState({}),[l,n]=m.useState({}),[d,c]=m.useState(!1),p=m.useCallback(()=>{const t={1:5,2:6,3:7,4:10,5:13,6:14,7:3,8:12,10:14,11:15,17:14,12:5,13:6,14:7,18:15,15:10,16:13,25:11,19:1,20:5,21:6,22:7,26:14,23:8,24:10,27:15,28:9,29:1,30:6,31:7,32:8,33:10,34:11,35:13,36:9,37:1,38:3,39:4,40:7,41:8,42:9,43:4,44:6,45:13,46:14,47:9,48:4,49:6,50:7,51:11,52:13,53:15,54:5,55:9,56:3,57:6,58:4,59:5,60:7,61:8,62:10,63:1,64:6,65:11,66:12,67:13,68:14,69:9,70:4,71:6,72:8,73:10,74:13,75:5,76:7,77:2,78:3,79:4,80:9,81:1,82:3,83:4,84:5,85:6,86:10,87:14,88:1,89:7,90:10,91:13,92:2,93:3,94:4,95:6,96:8,97:9,98:11};for(let e=1;e<=98;e++)t[e]||(t[e]=1);return t},[]),[h]=m.useState(p());m.useEffect(()=>{x()},[]);const x=()=>{const t={};for(let s=1;s<=98;s++)t[`f${s}_a`]="",t[`f${s}_b`]="",t[`f${s}_c`]="",t[`f${s}_d`]="";o(t);const e={};for(let s=1;s<=5;s++)e[`q${s}_a`]="",e[`q${s}_b`]="",e[`q${s}_c`]="",e[`q${s}_d`]="";a(e);const i={};for(let s=1;s<=15;s++)i[`l${s}_min`]="",i[`l${s}_init`]="",i[`l${s}_max`]="";n(i)};m.useEffect(()=>{f()},[s,r,l]);const f=()=>{let t=!0;for(let e=1;e<=98&&t;e++)u(`f${e}_a`)&&u(`f${e}_b`)&&u(`f${e}_c`)&&u(`f${e}_d`)||(t=!1);for(let e=1;e<=5&&t;e++)u(`q${e}_a`)&&u(`q${e}_b`)&&u(`q${e}_c`)&&u(`q${e}_d`)||(t=!1);for(let e=1;e<=15&&t;e++){const i=parseFloat(l[`l${e}_min`]),s=parseFloat(l[`l${e}_init`]),o=parseFloat(l[`l${e}_max`]);(isNaN(i)||isNaN(s)||isNaN(o)||i<0||i>1||s<0||s>1||o<0||o>1||i>s||s>o)&&(t=!1)}c(t)},u=t=>{const e=parseFloat(s[t]||r[t]);return!isNaN(e)&&isFinite(e)},g=(t,e,i)=>{"f"===t?o(t=>({...t,[e]:i})):"q"===t?a(t=>({...t,[e]:i})):"l"===t&&n(t=>({...t,[e]:i}))},b=()=>{const t=[];for(let e=1;e<=15;e++)t.push({min:parseFloat(l[`l${e}_min`]),init:parseFloat(l[`l${e}_init`]),max:parseFloat(l[`l${e}_max`])});return t},_=()=>{const t=[];for(let e=1;e<=98;e++)t.push({a:parseFloat(s[`f${e}_a`]),b:parseFloat(s[`f${e}_b`]),c:parseFloat(s[`f${e}_c`]),d:parseFloat(s[`f${e}_d`]),l_index:h[e]});return t},y=()=>{const t=[];for(let e=1;e<=5;e++)t.push({a:parseFloat(r[`q${e}_a`]),b:parseFloat(r[`q${e}_b`]),c:parseFloat(r[`q${e}_c`]),d:parseFloat(r[`q${e}_d`])});return t};return t.jsx("div",{className:"tab-content active",children:t.jsxs("div",{className:"widgets-container",children:[t.jsxs("div",{className:"widget",children:[t.jsxs("h3",{children:["Полиномы f",t.jsx("sub",{children:"j"}),"(L",t.jsx("sub",{children:"i"}),")"]}),t.jsx("div",{className:"scrollable-list",id:"f-polynomials-list",children:Array.from({length:98},(e,i)=>{const o=i+1,r=h[o];return t.jsxs("div",{className:"polynomial-item",children:["f",t.jsx("sub",{children:o}),"(L",t.jsx("sub",{children:r}),") =",t.jsx("input",{type:"number",step:"0.01",className:"coefficient-input",value:s[`f${o}_a`]||"",onChange:t=>g("f",`f${o}_a`,t.target.value),placeholder:"a"}),"× (L",t.jsx("sub",{children:r}),")³ +",t.jsx("input",{type:"number",step:"0.01",className:"coefficient-input",value:s[`f${o}_b`]||"",onChange:t=>g("f",`f${o}_b`,t.target.value),placeholder:"b"}),"× (L",t.jsx("sub",{children:r}),")² +",t.jsx("input",{type:"number",step:"0.01",className:"coefficient-input",value:s[`f${o}_c`]||"",onChange:t=>g("f",`f${o}_c`,t.target.value),placeholder:"c"}),"× L",t.jsx("sub",{children:r})," +",t.jsx("input",{type:"number",step:"0.01",className:"coefficient-input",value:s[`f${o}_d`]||"",onChange:t=>g("f",`f${o}_d`,t.target.value),placeholder:"d"})]},i)})})]}),t.jsxs("div",{className:"widget",children:[t.jsxs("h3",{children:["Возмущения q",t.jsx("sub",{children:"k"}),"(t)"]}),t.jsx("div",{className:"scrollable-list",id:"q-polynomials-list",children:Array.from({length:5},(e,i)=>{const s=i+1;return t.jsxs("div",{className:"polynomial-item",children:["q",t.jsx("sub",{children:s}),"(t) =",t.jsx("input",{type:"number",step:"0.001",className:"coefficient-input",value:r[`q${s}_a`]||"",onChange:t=>g("q",`q${s}_a`,t.target.value),placeholder:"a"}),"× t³ +",t.jsx("input",{type:"number",step:"0.001",className:"coefficient-input",value:r[`q${s}_b`]||"",onChange:t=>g("q",`q${s}_b`,t.target.value),placeholder:"b"}),"× t² +",t.jsx("input",{type:"number",step:"0.001",className:"coefficient-input",value:r[`q${s}_c`]||"",onChange:t=>g("q",`q${s}_c`,t.target.value),placeholder:"c"}),"× t +",t.jsx("input",{type:"number",step:"0.001",className:"coefficient-input",value:r[`q${s}_d`]||"",onChange:t=>g("q",`q${s}_d`,t.target.value),placeholder:"d"})]},i)})})]}),t.jsxs("div",{className:"widget",children:[t.jsxs("h3",{children:["Параметры характеристик L",t.jsx("sub",{children:"i"})]}),t.jsxs("div",{className:"l-params-container",children:[t.jsxs("div",{className:"characteristics-names",children:[t.jsx("h4",{children:"Характеристики"}),["L1 - Остаток денежных средств","L2 - Выручка","L3 - Прибыль","L4 - Активы","L5 - Численность","L6 - Конкурентоспособность","L7 - Объем продаж в натуральном выражении","L8 - Инновационность","L9 - Известность бренда","L10 - Материалоемкость","L11 - Количество ремонтов","L12 - Износ оборудования","L13 - Налоги в бюджет","L14 - Социальная сфера","L15 - Экологичность"].map((e,i)=>t.jsx("div",{className:"characteristic-name-item",children:e},i))]}),t.jsxs("div",{className:"params-column",children:[t.jsx("h4",{children:"Мин"}),Array.from({length:15},(e,i)=>t.jsx("div",{className:"l-param-item",children:t.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",value:l[`l${i+1}_min`]||"",onChange:t=>g("l",`l${i+1}_min`,t.target.value),placeholder:"0.0-1.0"})},`min${i}`))]}),t.jsxs("div",{className:"params-column",children:[t.jsx("h4",{children:"Нач"}),Array.from({length:15},(e,i)=>t.jsx("div",{className:"l-param-item",children:t.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",value:l[`l${i+1}_init`]||"",onChange:t=>g("l",`l${i+1}_init`,t.target.value),placeholder:"0.0-1.0"})},`init${i}`))]}),t.jsxs("div",{className:"params-column",children:[t.jsx("h4",{children:"Макс"}),Array.from({length:15},(e,i)=>t.jsx("div",{className:"l-param-item",children:t.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",value:l[`l${i+1}_max`]||"",onChange:t=>g("l",`l${i+1}_max`,t.target.value),placeholder:"0.0-1.0"})},`max${i}`))]})]})]}),t.jsx("div",{className:"widget control-widget",children:t.jsxs("div",{className:"control-content",children:[t.jsx("h3",{children:"Управление расчетами"}),t.jsxs("div",{className:"control-buttons",children:[t.jsx("button",{id:"calculate-btn",className:"btn primary",onClick:()=>{if(!d)return;const t={l_params:b(),f_coeffs:_(),q_coeffs:y(),t_span:[0,1],num_points:100};e(t)},disabled:!d||i,children:i?"Расчет...":"Провести расчеты"}),t.jsx("button",{id:"random-btn",className:"btn secondary",onClick:()=>{const t={};for(let s=1;s<=98;s++)t[`f${s}_a`]=(2*Math.random()-1).toFixed(2),t[`f${s}_b`]=(2*Math.random()-1).toFixed(2),t[`f${s}_c`]=(2*Math.random()-1).toFixed(2),t[`f${s}_d`]=(2*Math.random()-1).toFixed(2);o(t);const e={};for(let s=1;s<=5;s++)e[`q${s}_a`]=(.1*Math.random()).toFixed(3),e[`q${s}_b`]=(.1*Math.random()).toFixed(3),e[`q${s}_c`]=(.2*Math.random()).toFixed(3),e[`q${s}_d`]=(.5*Math.random()).toFixed(3);a(e);const i={};for(let s=1;s<=15;s++){const t=.3*Math.random(),e=t+Math.random()*(.7-t),o=e+Math.random()*(1-e);i[`l${s}_min`]=t.toFixed(2),i[`l${s}_init`]=e.toFixed(2),i[`l${s}_max`]=o.toFixed(2)}n(i)},children:"Случайные значения"}),t.jsx("button",{className:"btn btn-secondary",onClick:()=>{console.log("Заполнение нормальными значениями...");const t={};for(let s=1;s<=98;s++)t[`f${s}_a`]=(.1*Math.random()-.05).toFixed(3),t[`f${s}_b`]=(.2*Math.random()-.1).toFixed(3),t[`f${s}_c`]=(.3*Math.random()-.15).toFixed(3),t[`f${s}_d`]=(.1*Math.random()+.1).toFixed(3);o(t);const e={};for(let s=1;s<=5;s++)e[`q${s}_a`]=(.05*Math.random()-.025).toFixed(4),e[`q${s}_b`]=(.05*Math.random()-.025).toFixed(4),e[`q${s}_c`]=(.1*Math.random()-.05).toFixed(4),e[`q${s}_d`]=(.05*Math.random()+.05).toFixed(4);a(e);const i={};for(let s=1;s<=15;s++){const t=(.2*Math.random()).toFixed(2),e=(.3*Math.random()+.3).toFixed(2),o=(.3*Math.random()+.7).toFixed(2);i[`l${s}_min`]=t,i[`l${s}_init`]=e,i[`l${s}_max`]=o}n(i),setDebugInfo("Заполнено нормальными значениями")},children:"Нормальные значения"}),t.jsxs("div",{className:"validation-status "+(d?"valid":""),id:"validation-status",children:[t.jsx("span",{className:"status-icon",children:d?"✓":"⚠"}),t.jsx("span",{className:"status-text",children:d?"Все поля заполнены корректно":"Заполните все поля корректными значениями"})]})]})]})})]})})};e.register(i,s,o,r,a,l,n);const _=({results:e})=>{if(!e||!e.t||!e.L)return t.jsx("div",{className:"tab-content active",children:t.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[t.jsx("h3",{children:"Графики характеристик"}),t.jsx("p",{children:'Нет данных для отображения. Выполните расчеты на вкладке "Ввод данных".'})]})});const i=["L1 - Остаток денежных средств","L2 - Выручка","L3 - Прибыль","L4 - Активы","L5 - Численность","L6 - Конкурентоспособность","L7 - Объем продаж","L8 - Инновационность","L9 - Известность бренда","L10 - Материалоемкость","L11 - Ремонты","L12 - Износ оборудования","L13 - Налоги в бюджет","L14 - Социальная сфера","L15 - Экологичность"],s=["q1 - Макроэкономические факторы","q2 - Рыночные колебания","q3 - Технологические изменения","q4 - Регуляторные изменения","q5 - Социальные факторы"],o=["#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#ffa600","#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43"],r=["#444e86","#955196","#dd5182","#ff6e54","#ffa600"],a={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,font:{size:11},padding:10}}},scales:{x:{title:{display:!0,text:"Время t",font:{size:12,weight:"bold"}},grid:{color:"rgba(0,0,0,0.05)"}},y:{title:{display:!0,text:"Значение",font:{size:12,weight:"bold"}},min:0,max:1,grid:{color:"rgba(0,0,0,0.05)"},ticks:{stepSize:.2}}}},l=Array.isArray(e.t)?e.t.map(t=>t.toFixed(2)):[],n=(t,s,r)=>{const a=[];for(let l=t;l<s;l++)l<e.L.length&&a.push({label:i[l],data:Array.isArray(e.L[l])?e.L[l]:[],borderColor:o[l],backgroundColor:o[l]+"20",borderWidth:2,tension:.4,fill:!1,pointRadius:1,pointHoverRadius:4});return{labels:l,datasets:a}};return e.q.map((t,e)=>({label:s[e],data:Array.isArray(t)?t:[],borderColor:r[e],backgroundColor:r[e]+"20",borderWidth:2,tension:.4,fill:!1,pointRadius:1,pointHoverRadius:4})),t.jsx("div",{className:"tab-content active",children:t.jsxs("div",{style:{padding:"20px"},children:[t.jsx("h2",{style:{textAlign:"center",marginBottom:"30px",color:"#2c3e50"},children:"Графики характеристик компании"}),t.jsxs("div",{style:{marginBottom:"40px",backgroundColor:"white",padding:"20px",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[t.jsx("h3",{style:{marginBottom:"20px",textAlign:"center",color:"#333"},children:"Финансовые показатели (L1-L5)"}),t.jsx("div",{style:{height:"400px"},children:t.jsx(d,{data:n(0,5),options:{...a,plugins:{...a.plugins,title:{display:!0,text:"Финансовые показатели (L1-L5)",font:{size:14,weight:"bold"}}}}})})]}),t.jsxs("div",{style:{marginBottom:"40px",backgroundColor:"white",padding:"20px",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[t.jsx("h3",{style:{marginBottom:"20px",textAlign:"center",color:"#333"},children:"Операционные показатели (L6-L10)"}),t.jsx("div",{style:{height:"400px"},children:t.jsx(d,{data:n(5,10),options:{...a,plugins:{...a.plugins,title:{display:!0,text:"Операционные показатели (L6-L10)",font:{size:14,weight:"bold"}}}}})})]}),t.jsxs("div",{style:{marginBottom:"40px",backgroundColor:"white",padding:"20px",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[t.jsx("h3",{style:{marginBottom:"20px",textAlign:"center",color:"#333"},children:"Качественные показатели (L11-L15)"}),t.jsx("div",{style:{height:"400px"},children:t.jsx(d,{data:n(10,15),options:{...a,plugins:{...a.plugins,title:{display:!0,text:"Качественные показатели (L11-L15)",font:{size:14,weight:"bold"}}}}})})]})]})})};e.register(c,o,r,p,l,n,a);const y=({results:e,inputData:i})=>{const[s,o]=m.useState(.5),[r,a]=m.useState(new Array(15).fill(0)),[l,n]=m.useState(new Array(15).fill(1));m.useEffect(()=>{if(i&&i.l_params){const t=i.l_params.map(t=>t.min||0),e=i.l_params.map(t=>t.max||1);a(t),n(e)}},[i]);const d=["L1 - Остаток денежных средств","L2 - Выручка","L3 - Прибыль","L4 - Активы","L5 - Численность","L6 - Конкурентоспособность","L7 - Объем продаж","L8 - Инновационность","L9 - Известность бренда","L10 - Материалоемкость","L11 - Ремонты","L12 - Износ оборудования","L13 - Налоги в бюджет","L14 - Социальная сфера","L15 - Экологичность"];if(!e||!e.t||!e.L)return t.jsx("div",{className:"tab-content active",children:t.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[t.jsx("h3",{children:"Лепестковая диаграмма характеристик"}),t.jsx("p",{children:'Нет данных для отображения. Выполните расчеты на вкладке "Ввод данных".'})]})});const c=(t=>{if(!Array.isArray(e.t)||0===e.t.length)return 0;let i=0,s=Math.abs(e.t[0]-t);for(let o=1;o<e.t.length;o++){const r=Math.abs(e.t[o]-t);r<s&&(s=r,i=o)}return i})(s),p=e.L.map((t,e)=>{if(!Array.isArray(t)||t.length<=c)return r[e]||0;const i=t[c];return isFinite(i)?i:r[e]||0}),x={responsive:!0,maintainAspectRatio:!1,scales:{r:{angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)"},grid:{color:"rgba(0, 0, 0, 0.1)"},suggestedMin:0,suggestedMax:1,ticks:{stepSize:.2,backdropColor:"transparent",showLabelBackdrop:!1,font:{size:10}},pointLabels:{font:{size:11},color:"#333"}}},plugins:{legend:{position:"top",labels:{usePointStyle:!0,font:{size:11},padding:15}},tooltip:{callbacks:{label:t=>{var e;const i=t.dataset.label||"",s=t.parsed.r.toFixed(3),o=t.dataIndex,a=(null==(e=d[o])?void 0:e.split(" - ")[1])||`L${o+1}`,n=r[o]||0,c=l[o]||1;return`${i}: ${a} = ${s} (min: ${n.toFixed(2)}, max: ${c.toFixed(2)})`}}}}},f={labels:d.map(t=>{const e=t.split(" - ")[1]||t;return e.length>20?e.substring(0,20)+"...":e}),datasets:[{label:"Минимальные значения",data:r,backgroundColor:"rgba(255, 99, 132, 0.1)",borderColor:"rgba(255, 99, 132, 0.3)",pointBackgroundColor:"rgba(255, 99, 132, 0.3)",pointBorderColor:"#fff",borderWidth:1,pointRadius:1,fill:!0},{label:"Максимальные значения",data:l,backgroundColor:"rgba(54, 162, 235, 0.1)",borderColor:"rgba(54, 162, 235, 0.3)",pointBackgroundColor:"rgba(54, 162, 235, 0.3)",pointBorderColor:"#fff",borderWidth:1,pointRadius:1,fill:!0},{label:`Текущие значения (t = ${s.toFixed(2)})`,data:p,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",pointBackgroundColor:"rgba(75, 192, 192, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(75, 192, 192, 1)",borderWidth:2,pointRadius:3,fill:!1}]};return t.jsx("div",{className:"tab-content active",children:t.jsxs("div",{style:{padding:"20px"},children:[t.jsxs("div",{className:"radar-header",style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{textAlign:"center",marginBottom:"15px"},children:"Лепестковая диаграмма характеристик компании"}),t.jsx("div",{className:"radar-controls",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",marginBottom:"20px",flexWrap:"wrap"},children:t.jsxs("div",{className:"time-control",style:{display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("label",{htmlFor:"time-input",style:{fontWeight:"500",color:"#333"},children:"Время t:"}),t.jsx("input",{type:"range",id:"time-slider",min:"0",max:"1",step:"0.01",value:s,onChange:t=>o(parseFloat(t.target.value)),style:{width:"200px"}}),t.jsx("input",{type:"number",id:"time-input",min:"0",max:"1",step:"0.01",value:s,onChange:t=>{const e=parseFloat(t.target.value);!isNaN(e)&&e>=0&&e<=1&&o(e)},style:{width:"80px",padding:"5px 10px",border:"1px solid #ddd",borderRadius:"4px",textAlign:"center"}})]})}),t.jsx("p",{style:{textAlign:"center",color:"#666",maxWidth:"800px",margin:"0 auto 20px",lineHeight:"1.5",fontSize:"14px"},children:"Зеленые области показывают допустимые диапазоны значений характеристик. Красная область - минимальные значения, синяя - максимальные. Темно-зеленая линия показывает текущие значения в выбранный момент времени."})]}),t.jsx("div",{style:{height:"600px",marginBottom:"30px"},children:t.jsx(h,{data:f,options:x})}),t.jsxs("div",{style:{marginTop:"30px",backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"10px",border:"1px solid #e9ecef"},children:[t.jsxs("h4",{style:{marginBottom:"15px",color:"#2c3e50"},children:["Статистика характеристик при t = ",s.toFixed(2)]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"15px"},children:p.map((e,i)=>{const s=r[i]||0,o=l[i]||1,a=(e-s)/(o-s||1)*100,n=Math.min(100,Math.max(0,a));let c="",p="";return n>=80?(c="Отличный",p="#28a745"):n>=50?(c="Хороший",p="#17a2b8"):n>=30?(c="Средний",p="#ffc107"):(c="Низкий",p="#dc3545"),t.jsxs("div",{style:{backgroundColor:"white",padding:"15px",borderRadius:"8px",border:"1px solid #e9ecef",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[t.jsx("span",{style:{fontWeight:"bold",color:"#333"},children:d[i].split(" - ")[1]}),t.jsx("span",{style:{fontWeight:"bold",color:p,fontSize:"14px"},children:c})]}),t.jsxs("div",{style:{marginBottom:"10px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#666",marginBottom:"5px"},children:[t.jsxs("span",{children:["Значение: ",e.toFixed(3)]}),t.jsxs("span",{children:[n.toFixed(1),"% от диапазона"]})]}),t.jsxs("div",{style:{width:"100%",backgroundColor:"#e9ecef",borderRadius:"4px",overflow:"hidden",height:"20px",position:"relative"},children:[t.jsx("div",{style:{position:"absolute",left:100*s+"%",width:100*(o-s)+"%",height:"100%",backgroundColor:"#dee2e6",borderLeft:"1px solid #adb5bd",borderRight:"1px solid #adb5bd"}}),t.jsx("div",{style:{width:`${n}%`,height:"100%",backgroundColor:p,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"11px",fontWeight:"bold"},children:n>=15?`${n.toFixed(0)}%`:""})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",color:"#666",marginTop:"5px"},children:[t.jsxs("span",{children:["min: ",s.toFixed(2)]}),t.jsxs("span",{children:["max: ",o.toFixed(2)]})]})]})]},i)})})]})]})})};e.register(i,s,o,r,a,l,n);const j=({results:e})=>{if(!e||!e.t||!e.q)return t.jsx("div",{className:"tab-content active",children:t.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[t.jsx("h3",{children:"Графики внешних возмущений"}),t.jsx("p",{children:'Нет данных для отображения. Выполните расчеты на вкладке "Ввод данных".'})]})});const i=["q1 - Макроэкономические факторы","q2 - Рыночные колебания","q3 - Технологические изменения","q4 - Регуляторные изменения","q5 - Социальные факторы"],s=["#003f5c","#2f4b7c","#665191","#a05195","#d45087"],o={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,font:{size:11},padding:10}}},scales:{x:{title:{display:!0,text:"Время t",font:{size:12,weight:"bold"}},grid:{color:"rgba(0,0,0,0.05)"}},y:{title:{display:!0,text:"Значение возмущения",font:{size:12,weight:"bold"}},min:0,max:1,grid:{color:"rgba(0,0,0,0.05)"},ticks:{stepSize:.2}}}},r=Array.isArray(e.t)?e.t.map(t=>t.toFixed(2)):[],a={labels:r,datasets:e.q.map((t,e)=>({label:i[e],data:Array.isArray(t)?t:[],borderColor:s[e],backgroundColor:s[e]+"20",borderWidth:2,tension:.4,fill:!1,pointRadius:1,pointHoverRadius:4}))},l=e.q.map((t,e)=>({labels:r,datasets:[{label:i[e],data:Array.isArray(t)?t:[],borderColor:s[e],backgroundColor:s[e]+"40",borderWidth:3,tension:.4,fill:!0,pointRadius:2,pointHoverRadius:5}]})),n=t=>{const i=e.q[t]||[];if(0===i.length)return{avg:0,min:0,max:0,std:0};const s=i.reduce((t,e)=>t+e,0)/i.length,o=Math.min(...i),r=Math.max(...i),a=i.reduce((t,e)=>t+Math.pow(e-s,2),0)/i.length,l=Math.sqrt(a);return{avg:s,min:o,max:r,std:l}};return t.jsx("div",{className:"tab-content active",children:t.jsxs("div",{style:{padding:"20px"},children:[t.jsx("h2",{style:{textAlign:"center",marginBottom:"30px",color:"#2c3e50"},children:"Графики внешних возмущений"}),t.jsx("p",{style:{textAlign:"center",color:"#666",marginBottom:"30px",maxWidth:"900px",marginLeft:"auto",marginRight:"auto",lineHeight:"1.6"},children:"Внешние возмущения — это факторы, которые влияют на компанию извне и не контролируются напрямую её менеджментом. Эти факторы могут оказывать как положительное, так и отрицательное влияние на различные характеристики компании."}),t.jsxs("div",{style:{marginBottom:"40px",backgroundColor:"white",padding:"25px",borderRadius:"10px",boxShadow:"0 2px 15px rgba(0,0,0,0.1)"},children:[t.jsx("h3",{style:{marginBottom:"25px",textAlign:"center",color:"#333",borderBottom:"2px solid #f0f0f0",paddingBottom:"15px"},children:"Все внешние возмущения (q1-q5)"}),t.jsx("div",{style:{height:"450px"},children:t.jsx(d,{data:a,options:{...o,plugins:{...o.plugins,title:{display:!0,text:"Динамика всех внешних возмущений",font:{size:14,weight:"bold"}}}}})})]}),t.jsxs("div",{style:{marginBottom:"40px"},children:[t.jsx("h3",{style:{marginBottom:"25px",textAlign:"center",color:"#333",borderBottom:"2px solid #f0f0f0",paddingBottom:"15px"},children:"Индивидуальные графики возмущений"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"25px"},children:e.q.map((e,r)=>{const a=n(r);return t.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[t.jsx("h4",{style:{marginBottom:"15px",color:s[r],textAlign:"center"},children:i[r]}),t.jsx("div",{style:{height:"300px",marginBottom:"15px"},children:t.jsx(d,{data:l[r],options:{...o,plugins:{...o.plugins,legend:{display:!1}},scales:{...o.scales,y:{...o.scales.y,min:0,max:1}}}})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px",fontSize:"13px"},children:[t.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"5px",textAlign:"center"},children:[t.jsx("div",{style:{fontWeight:"bold",color:"#666"},children:"Среднее"}),t.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:s[r]},children:a.avg.toFixed(3)})]}),t.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"5px",textAlign:"center"},children:[t.jsx("div",{style:{fontWeight:"bold",color:"#666"},children:"Минимум"}),t.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#dc3545"},children:a.min.toFixed(3)})]}),t.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"5px",textAlign:"center"},children:[t.jsx("div",{style:{fontWeight:"bold",color:"#666"},children:"Максимум"}),t.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#28a745"},children:a.max.toFixed(3)})]}),t.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"5px",textAlign:"center"},children:[t.jsx("div",{style:{fontWeight:"bold",color:"#666"},children:"Отклонение"}),t.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#ffc107"},children:a.std.toFixed(4)})]})]})]},r)})})]}),t.jsxs("div",{style:{backgroundColor:"white",padding:"25px",borderRadius:"10px",boxShadow:"0 2px 15px rgba(0,0,0,0.1)"},children:[t.jsx("h3",{style:{marginBottom:"20px",textAlign:"center",color:"#333",borderBottom:"2px solid #f0f0f0",paddingBottom:"15px"},children:"Статистика внешних возмущений"}),t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{backgroundColor:"#f8f9fa"},children:[t.jsx("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #dee2e6",fontWeight:"bold",color:"#495057"},children:"Возмущение"}),t.jsx("th",{style:{padding:"12px",textAlign:"center",border:"1px solid #dee2e6",fontWeight:"bold",color:"#495057"},children:"Среднее"}),t.jsx("th",{style:{padding:"12px",textAlign:"center",border:"1px solid #dee2e6",fontWeight:"bold",color:"#495057"},children:"Минимум"}),t.jsx("th",{style:{padding:"12px",textAlign:"center",border:"1px solid #dee2e6",fontWeight:"bold",color:"#495057"},children:"Максимум"}),t.jsx("th",{style:{padding:"12px",textAlign:"center",border:"1px solid #dee2e6",fontWeight:"bold",color:"#495057"},children:"Стандартное отклонение"}),t.jsx("th",{style:{padding:"12px",textAlign:"center",border:"1px solid #dee2e6",fontWeight:"bold",color:"#495057"},children:"Стабильность"})]})}),t.jsx("tbody",{children:e.q.map((e,o)=>{const r=n(o),a=r.std<.1?"Высокая":r.std<.2?"Средняя":"Низкая",l=r.std<.1?"#28a745":r.std<.2?"#ffc107":"#dc3545";return t.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6",backgroundColor:o%2==0?"#fff":"#f8f9fa"},children:[t.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"bold",color:s[o]},children:i[o]}),t.jsx("td",{style:{padding:"12px",textAlign:"center",border:"1px solid #dee2e6",fontWeight:"bold"},children:r.avg.toFixed(4)}),t.jsx("td",{style:{padding:"12px",textAlign:"center",border:"1px solid #dee2e6",color:"#dc3545",fontWeight:"bold"},children:r.min.toFixed(4)}),t.jsx("td",{style:{padding:"12px",textAlign:"center",border:"1px solid #dee2e6",color:"#28a745",fontWeight:"bold"},children:r.max.toFixed(4)}),t.jsx("td",{style:{padding:"12px",textAlign:"center",border:"1px solid #dee2e6"},children:r.std.toFixed(4)}),t.jsx("td",{style:{padding:"12px",textAlign:"center",border:"1px solid #dee2e6",color:l,fontWeight:"bold"},children:a})]},o)})})]})})]}),t.jsxs("div",{style:{marginTop:"30px",backgroundColor:"#e8f4fd",padding:"20px",borderRadius:"10px",border:"1px solid #b6d4fe"},children:[t.jsx("h4",{style:{marginBottom:"15px",color:"#084298"},children:"Описание внешних возмущений:"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"15px"},children:[t.jsxs("div",{style:{backgroundColor:"white",padding:"15px",borderRadius:"8px"},children:[t.jsx("h5",{style:{color:s[0],marginBottom:"8px"},children:"q1 - Макроэкономические факторы"}),t.jsx("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"#555"},children:"Инфляция, курс валют, ключевая ставка ЦБ, ВВП, уровень безработицы, экономические циклы, международные санкции."})]}),t.jsxs("div",{style:{backgroundColor:"white",padding:"15px",borderRadius:"8px"},children:[t.jsx("h5",{style:{color:s[1],marginBottom:"8px"},children:"q2 - Рыночные колебания"}),t.jsx("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"#555"},children:"Колебания спроса, изменение цен конкурентов, появление новых игроков на рынке, изменение цен на сырье и материалы, сезонные колебания."})]}),t.jsxs("div",{style:{backgroundColor:"white",padding:"15px",borderRadius:"8px"},children:[t.jsx("h5",{style:{color:s[2],marginBottom:"8px"},children:"q3 - Технологические изменения"}),t.jsx("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"#555"},children:"Появление новых технологий, устаревание оборудования, цифровизация, автоматизация процессов, кибербезопасность, инновации в отрасли."})]}),t.jsxs("div",{style:{backgroundColor:"white",padding:"15px",borderRadius:"8px"},children:[t.jsx("h5",{style:{color:s[3],marginBottom:"8px"},children:"q4 - Регуляторные изменения"}),t.jsx("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"#555"},children:"Изменения в законодательстве, новые налоги и пошлины, экологические стандарты, требования к качеству продукции, трудовое законодательство."})]}),t.jsxs("div",{style:{backgroundColor:"white",padding:"15px",borderRadius:"8px"},children:[t.jsx("h5",{style:{color:s[4],marginBottom:"8px"},children:"q5 - Социальные факторы"}),t.jsx("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"#555"},children:"Демографические изменения, культурные тренды, уровень образования, социальная ответственность, здоровый образ жизни, экологическая сознательность."})]})]})]})]})})};class v{constructor(){this.L_min=new Array(15).fill(0),this.L_init=new Array(15).fill(0),this.L_max=new Array(15).fill(1),this.f_coeffs={},this.q_coeffs={}}set_L_params(t,e,i,s){this.L_min[t-1]=e,this.L_init[t-1]=i,this.L_max[t-1]=s}set_f_poly(t,e,i,s,o,r){this.f_coeffs[t]={a:e,b:i,c:s,d:o,idx:r-1}}set_q_poly(t,e,i,s,o){this.q_coeffs[t]={a:e,b:i,c:s,d:o}}compute_f(t,e){if(!this.f_coeffs[t])return 1;const{a:i,b:s,c:o,d:r,idx:a}=this.f_coeffs[t],l=e[a];return i*Math.pow(l,3)+s*Math.pow(l,2)+o*l+r}compute_q_raw(t,e){if(!this.q_coeffs[t])return 0;const{a:i,b:s,c:o,d:r}=this.q_coeffs[t];return i*Math.pow(e,3)+s*Math.pow(e,2)+o*e+r}compute_q_normalized(t,e,i){const s=this.compute_q_raw(t,e);return i>0?Math.max(0,Math.min(1,s/i)):0}rhs_normalized(t,e,i,s){const o=new Array(15).fill(0),r=[1,2,3,4,5].map(e=>this.compute_q_normalized(e,t,i));o[0]=1/s*(this.compute_f(1,e)*this.compute_f(2,e)*this.compute_f(3,e)*this.compute_f(4,e)*this.compute_f(5,e)*this.compute_f(6,e)*(r[0]+r[1])-r[2]),o[1]=1/s*(this.compute_f(7,e)*this.compute_f(8,e)*e[12]*this.compute_f(10,e)*this.compute_f(11,e)*(r[1]+r[4])-r[3]),o[2]=1/s*(this.compute_f(17,e)*this.compute_f(12,e)*this.compute_f(13,e)*this.compute_f(14,e)*this.compute_f(18,e)*this.compute_f(15,e)*this.compute_f(16,e)*r[1]-r[4]),o[3]=1/s*(this.compute_f(25,e)*this.compute_f(19,e)*this.compute_f(20,e)*this.compute_f(21,e)*this.compute_f(22,e)*this.compute_f(26,e)*this.compute_f(23,e)*this.compute_f(24,e)*this.compute_f(27,e)*r[1]-this.compute_f(28,e)),o[4]=1/s*(this.compute_f(29,e)*this.compute_f(30,e)*this.compute_f(31,e)*this.compute_f(32,e)*this.compute_f(33,e)*this.compute_f(34,e)*this.compute_f(35,e)*(r[0]+r[1]+r[2])-this.compute_f(36,e)),o[5]=1/s*(this.compute_f(37,e)*this.compute_f(38,e)*this.compute_f(39,e)*this.compute_f(40,e)*this.compute_f(41,e)*(r[0]+r[2])-this.compute_f(42,e)),o[6]=1/s*(this.compute_f(43,e)*this.compute_f(44,e)*this.compute_f(45,e)*this.compute_f(46,e)*(r[2]+r[3])-this.compute_f(47,e)),o[7]=1/s*(this.compute_f(48,e)*this.compute_f(49,e)*this.compute_f(50,e)*this.compute_f(51,e)*this.compute_f(52,e)*this.compute_f(53,e)*r[2]-this.compute_f(54,e)*this.compute_f(55,e)),o[8]=1/s*(this.compute_f(56,e)*this.compute_f(57,e)*(r[0]+r[2]+r[3])-this.compute_f(58,e)*this.compute_f(59,e)*this.compute_f(60,e)*this.compute_f(61,e)*this.compute_f(62,e)),o[9]=1/s*(this.compute_f(63,e)*this.compute_f(64,e)*this.compute_f(65,e)*this.compute_f(66,e)*this.compute_f(67,e)*this.compute_f(68,e)*(r[1]+r[4])-this.compute_f(69,e)),o[10]=1/s*(this.compute_f(70,e)*this.compute_f(71,e)*this.compute_f(72,e)*this.compute_f(73,e)*this.compute_f(74,e)*(r[0]+r[2])-this.compute_f(75,e)*this.compute_f(76,e)),o[11]=1/s*(this.compute_f(77,e)*this.compute_f(78,e)*this.compute_f(79,e)*(r[0]+r[1]+r[4])-this.compute_f(80,e)),o[12]=1/s*(this.compute_f(81,e)*this.compute_f(82,e)*this.compute_f(83,e)*this.compute_f(84,e)*this.compute_f(85,e)*this.compute_f(86,e)*this.compute_f(87,e)*(r[0]+r[1])-r[3]),o[13]=1/s*(this.compute_f(88,e)*this.compute_f(89,e)*this.compute_f(90,e)*this.compute_f(91,e)*(r[1]+r[2])-r[4]),o[14]=1/s*(this.compute_f(92,e)*this.compute_f(93,e)*this.compute_f(94,e)*this.compute_f(95,e)*this.compute_f(96,e)*this.compute_f(97,e)*this.compute_f(98,e)*(r[0]+r[1]+r[4])-r[2]);for(let a=0;a<o.length;a++)o[a]=Math.max(-10,Math.min(10,o[a]));return o}solve(t=[0,1],e=100){try{const[i,s]=t,o=(s-i)/(e-1),r=Array.from({length:e},(t,e)=>i+e*o);console.log("Шаг 1: Находим максимальные значения q...");const a=[];for(let t=1;t<=5;t++){const e=r.map(e=>Math.abs(this.compute_q_raw(t,e)));a.push(Math.max(...e))}const l=Math.max(...a,1);console.log(`Максимальное значение q: ${l}`),console.log("Шаг 2: Начальное приближение для L...");let n=new Array(15).fill(1);console.log("Шаг 3: Первый проход для нахождения L_max...");let d=new Array(15).fill(0);for(const t of r){const e=this.rhs_normalized(t,n,l,1);n=n.map((t,i)=>{const s=t+e[i]*o;return d[i]=Math.max(d[i],Math.abs(s)),Math.max(this.L_min[i],Math.min(this.L_max[i],s))})}const c=Math.max(...d,1);console.log(`Максимальное значение L: ${c}`),console.log("Шаг 4: Основной расчет с полной нормировкой...");const p=[],h=Array(15).fill().map(()=>[]),x=Array(5).fill().map(()=>[]);n=this.L_init.map((t,e)=>Math.max(this.L_min[e],Math.min(this.L_max[e],t)));for(let t=0;t<e;t++){const i=r[t];p.push(i),n.forEach((t,e)=>h[e].push(t));for(let t=1;t<=5;t++)x[t-1].push(this.compute_q_normalized(t,i,l));if(t<e-1){const t=this.rhs_normalized(i,n,l,c),e=this.rhs_normalized(i+o/2,n.map((e,i)=>e+t[i]*o/2),l,c),s=this.rhs_normalized(i+o/2,n.map((t,i)=>t+e[i]*o/2),l,c),r=this.rhs_normalized(i+o,n.map((t,e)=>t+s[e]*o),l,c);n=n.map((i,a)=>{let l=i+(t[a]+2*e[a]+2*s[a]+r[a])*o/6;return l/=c,l=Math.max(0,Math.min(1,l)),l=Math.max(this.L_min[a],Math.min(this.L_max[a],l)),l})}}return{t:p,L:h,q:x,L_global_max:c,q_global_max:l}}catch(i){console.error(`Error in solve: ${i}`);return{t:Array.from({length:e},(i,s)=>t[0]+(t[1]-t[0])*s/(e-1)),L:Array(15).fill().map(()=>Array(e).fill(.5)),q:Array(5).fill().map(()=>Array(e).fill(.5)),L_global_max:1,q_global_max:1}}}}const L=()=>{const[e,i]=m.useState("input"),[s,o]=m.useState(null),[r,a]=m.useState(!1),[l,n]=m.useState(null),[d,c]=m.useState(null);return t.jsxs("div",{className:"container",children:[t.jsx("h1",{children:"Калькулятор характеристик продуктовой компании"}),l&&t.jsxs("div",{style:{padding:"10px",margin:"10px 20px",backgroundColor:"#f8d7da",color:"#721c24",border:"1px solid #f5c6cb",borderRadius:"5px"},children:["⚠ ",l]}),t.jsxs("div",{className:"tabs",children:[t.jsx("button",{className:"tab-button "+("input"===e?"active":""),onClick:()=>i("input"),children:"Ввод данных"}),t.jsx("button",{className:"tab-button "+("graphs"===e?"active":""),onClick:()=>i("graphs"),disabled:!s,children:"Графики характеристик"}),t.jsx("button",{className:"tab-button "+("radar"===e?"active":""),onClick:()=>i("radar"),disabled:!s,children:"Лепестковая диаграмма"}),t.jsx("button",{className:"tab-button "+("disturbances"===e?"active":""),onClick:()=>i("disturbances"),disabled:!s,children:"График возмущений"})]}),"input"===e&&t.jsx("div",{className:"tab-content active",children:t.jsx(b,{onCalculate:async t=>{console.log("App: handleCalculate вызван с данными:",t),a(!0),n(null),c(t);try{console.log("App: Вызываю calculateResults...");const e=await(async t=>{const e=new v;return t.l_params.forEach((t,i)=>{e.set_L_params(i+1,t.min,t.init,t.max)}),t.f_coeffs.forEach((t,i)=>{e.set_f_poly(i+1,t.a,t.b,t.c,t.d,t.l_index)}),t.q_coeffs.forEach((t,i)=>{e.set_q_poly(i+1,t.a,t.b,t.c,t.d)}),e.solve(t.t_span,t.num_points)})(t);console.log("App: Результаты получены:",e),o(e),i("graphs")}catch(e){console.error("App: Ошибка при расчете:",e),n(`Ошибка при выполнении расчетов: ${e.message}`),alert(`Ошибка: ${e.message}`)}finally{a(!1)}},isCalculating:r})}),"graphs"===e&&s&&t.jsx("div",{className:"tab-content active",children:t.jsx(_,{results:s})}),"radar"===e&&s&&t.jsx("div",{className:"tab-content active",children:t.jsx(y,{results:s,inputData:d})}),"disturbances"===e&&s&&t.jsx("div",{className:"tab-content active",children:t.jsx(j,{results:s})})]})};u.createRoot(document.getElementById("root")).render(t.jsx(f.StrictMode,{children:t.jsx(L,{})}));
